<!DOCTYPE HTML>
<html >
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
		<link rel="stylesheet" type="text/css" href="./libs/css/jquery.mobile-1.3.2.min.css"/>
		<script type="text/javascript" src="./libs/js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="./libs/js/jquery.mobile-1.3.2.min.js"></script>
		<script type="text/javascript">
			var global = {}; // For node.js require
		</script>
		<script type="text/javascript" src="./FunJump.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
				$("#manuScreen").height(FunJump.HEIGHT);
				$("#manuScreen").width(FunJump.WIDTH);
				$("#manuScreen").css("margin-left", ($(window).width()-$("#manuScreen").width())/2);
				$("#gameImage").height(200);
				$("#gameImage").width(FunJump.WIDTH);
				// $("#footer").css("margin-top",FunJump.WIDTH-$("#footer").height()-20);

				//Add room click event handlers
				$("#rm1").click(function(){
					joinRoom(0);
				})
				$("#rm2").click(function(){
					joinRoom(1);
				})
				$("#rm3").click(function(){
					joinRoom(2);
				})
				$("#rm4").click(function(){
					joinRoom(3);
				})
			})


			joinRoom = function(num){
				url = "http://"+FunJump.SERVER_NAME+":4344/join/"+num,
				$.ajax({
					type: 'GET',
					url: url,
		    		success: function(data){
		    			console.log("OK to join room "+num);
		    			// console.log("http://"+FunJump.SERVER_NAME+":"+data.port+"/game.html");
		    			window.location.href = "http://"+FunJump.SERVER_NAME+":"+data.port+"/game.html";
		    		},
		    		error:function(data){
		    			console.log(data);
		    		},
		    		dataType: "json"
		    	});
			}

			$(window).resize(function(){
				//Always position at center.
				$("#manuScreen").css("margin-left", ($(window).width()-$("#manuScreen").width())/2);
			})

		</script>
		
	</head>
	<body>
		<section id="manuScreen" data-role="page" data-theme="a">
			<header data-role="header"> 
               <h1>Fun Jump</h1> 
         	</header> 
         	<div id="gameImage" data-role="content">
         		<p>.........</br>
         			........</br>
         			IMAGE goes here
         		</p>
         	</div>

         	<div data-role="content">      
         	      <ul data-role="listview" data-inset="true" data-dividertheme="a"> 
         	            <li data-role="list-divider">MENU</li> 
         	            <li>
         	            	<button id="rm1">Room 1</button>
         	            </li> 
         	            <li>
         	            	<button id="rm2">Room 2</button>
         	            </li> 
         	            <li>
         	            	<button id="rm3">Room 3</button>
         	            </li> 
         	            <li>
         	            	<button id="rm4">Room 4</button>
         	            </li> 
         	      </ul>           
         	</div>   
        	<div id="footer" data-role="footer">
        	 <h4>&copy; CS4344 AY1314</h4>
        	</div> 
		</section>
	
	</body>

</html>